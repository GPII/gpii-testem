"use strict";var cov_2fps54cpn3=function(){var path="/Users/duhrer/Source/rtf/gpii-testem/src/js/instrumenter.js",hash="af6036a7c55c0dc7ceab215b5365183f40d1f9a1",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/Users/duhrer/Source/rtf/gpii-testem/src/js/instrumenter.js",statementMap:{"0":{start:{line:9,column:16},end:{line:9,column:35}},"1":{start:{line:10,column:16},end:{line:10,column:47}},"2":{start:{line:11,column:16},end:{line:11,column:29}},"3":{start:{line:12,column:16},end:{line:12,column:31}},"4":{start:{line:13,column:16},end:{line:13,column:33}},"5":{start:{line:14,column:16},end:{line:14,column:31}},"6":{start:{line:16,column:15},end:{line:16,column:49}},"7":{start:{line:18,column:0},end:{line:18,column:31}},"8":{start:{line:20,column:0},end:{line:20,column:52}},"9":{start:{line:23,column:0},end:{line:31,column:2}},"10":{start:{line:43,column:0},end:{line:85,column:2}},"11":{start:{line:44,column:19},end:{line:44,column:21}},"12":{start:{line:46,column:29},end:{line:46,column:80}},"13":{start:{line:47,column:29},end:{line:47,column:81}},"14":{start:{line:50,column:22},end:{line:54,column:5}},"15":{start:{line:56,column:41},end:{line:56,column:136}},"16":{start:{line:59,column:35},end:{line:59,column:50}},"17":{start:{line:60,column:4},end:{line:60,column:44}},"18":{start:{line:61,column:27},end:{line:61,column:116}},"19":{start:{line:62,column:28},end:{line:62,column:153}},"20":{start:{line:63,column:4},end:{line:69,column:6}},"21":{start:{line:65,column:41},end:{line:65,column:166}},"22":{start:{line:66,column:12},end:{line:66,column:107}},"23":{start:{line:72,column:34},end:{line:72,column:49}},"24":{start:{line:73,column:4},end:{line:73,column:43}},"25":{start:{line:74,column:27},end:{line:74,column:178}},"26":{start:{line:75,column:4},end:{line:81,column:6}},"27":{start:{line:77,column:34},end:{line:77,column:115}},"28":{start:{line:78,column:12},end:{line:78,column:98}},"29":{start:{line:83,column:19},end:{line:83,column:51}},"30":{start:{line:84,column:4},end:{line:84,column:20}},"31":{start:{line:103,column:0},end:{line:108,column:2}},"32":{start:{line:104,column:27},end:{line:104,column:119}},"33":{start:{line:104,column:82},end:{line:104,column:116}},"34":{start:{line:105,column:34},end:{line:105,column:146}},"35":{start:{line:105,column:102},end:{line:105,column:143}},"36":{start:{line:106,column:34},end:{line:106,column:144}},"37":{start:{line:106,column:98},end:{line:106,column:141}},"38":{start:{line:107,column:4},end:{line:107,column:60}},"39":{start:{line:122,column:0},end:{line:155,column:2}},"40":{start:{line:123,column:18},end:{line:123,column:33}},"41":{start:{line:124,column:27},end:{line:124,column:105}},"42":{start:{line:125,column:27},end:{line:125,column:105}},"43":{start:{line:128,column:18},end:{line:133,column:5}},"44":{start:{line:134,column:19},end:{line:134,column:21}},"45":{start:{line:135,column:4},end:{line:146,column:7}},"46":{start:{line:136,column:35},end:{line:136,column:50}},"47":{start:{line:137,column:8},end:{line:137,column:44}},"48":{start:{line:138,column:8},end:{line:145,column:11}},"49":{start:{line:139,column:12},end:{line:144,column:13}},"50":{start:{line:140,column:16},end:{line:140,column:51}},"51":{start:{line:143,column:16},end:{line:143,column:52}},"52":{start:{line:147,column:19},end:{line:147,column:51}},"53":{start:{line:148,column:4},end:{line:153,column:6}},"54":{start:{line:150,column:12},end:{line:150,column:52}},"55":{start:{line:154,column:4},end:{line:154,column:19}},"56":{start:{line:168,column:0},end:{line:226,column:2}},"57":{start:{line:169,column:32},end:{line:169,column:71}},"58":{start:{line:170,column:33},end:{line:170,column:73}},"59":{start:{line:171,column:23},end:{line:171,column:90}},"60":{start:{line:173,column:19},end:{line:173,column:21}},"61":{start:{line:174,column:4},end:{line:223,column:7}},"62":{start:{line:175,column:8},end:{line:222,column:11}},"63":{start:{line:176,column:46},end:{line:176,column:61}},"64":{start:{line:178,column:37},end:{line:178,column:39}},"65":{start:{line:179,column:28},end:{line:179,column:77}},"66":{start:{line:180,column:29},end:{line:180,column:79}},"67":{start:{line:181,column:28},end:{line:181,column:52}},"68":{start:{line:182,column:12},end:{line:219,column:13}},"69":{start:{line:183,column:16},end:{line:185,column:17}},"70":{start:{line:184,column:20},end:{line:184,column:43}},"71":{start:{line:186,column:29},end:{line:186,column:63}},"72":{start:{line:187,column:41},end:{line:187,column:87}},"73":{start:{line:188,column:51},end:{line:188,column:66}},"74":{start:{line:189,column:16},end:{line:189,column:70}},"75":{start:{line:190,column:16},end:{line:197,column:19}},"76":{start:{line:191,column:20},end:{line:196,column:21}},"77":{start:{line:192,column:24},end:{line:192,column:67}},"78":{start:{line:195,column:24},end:{line:195,column:63}},"79":{start:{line:199,column:16},end:{line:212,column:17}},"80":{start:{line:200,column:36},end:{line:200,column:64}},"81":{start:{line:201,column:40},end:{line:201,column:59}},"82":{start:{line:202,column:48},end:{line:202,column:63}},"83":{start:{line:203,column:20},end:{line:203,column:67}},"84":{start:{line:204,column:20},end:{line:211,column:23}},"85":{start:{line:205,column:24},end:{line:210,column:25}},"86":{start:{line:206,column:28},end:{line:206,column:64}},"87":{start:{line:209,column:28},end:{line:209,column:60}},"88":{start:{line:213,column:41},end:{line:213,column:83}},"89":{start:{line:214,column:16},end:{line:214,column:113}},"90":{start:{line:217,column:16},end:{line:217,column:80}},"91":{start:{line:218,column:16},end:{line:218,column:58}},"92":{start:{line:221,column:12},end:{line:221,column:47}},"93":{start:{line:224,column:19},end:{line:224,column:51}},"94":{start:{line:225,column:4},end:{line:225,column:20}},"95":{start:{line:239,column:0},end:{line:268,column:2}},"96":{start:{line:240,column:32},end:{line:240,column:71}},"97":{start:{line:241,column:33},end:{line:241,column:73}},"98":{start:{line:242,column:19},end:{line:242,column:21}},"99":{start:{line:243,column:4},end:{line:265,column:7}},"100":{start:{line:244,column:8},end:{line:264,column:11}},"101":{start:{line:245,column:34},end:{line:245,column:49}},"102":{start:{line:246,column:12},end:{line:262,column:13}},"103":{start:{line:247,column:36},end:{line:247,column:85}},"104":{start:{line:248,column:33},end:{line:248,column:67}},"105":{start:{line:249,column:33},end:{line:249,column:83}},"106":{start:{line:250,column:32},end:{line:250,column:56}},"107":{start:{line:251,column:16},end:{line:253,column:17}},"108":{start:{line:252,column:20},end:{line:252,column:43}},"109":{start:{line:254,column:34},end:{line:254,column:66}},"110":{start:{line:255,column:16},end:{line:257,column:19}},"111":{start:{line:256,column:20},end:{line:256,column:46}},"112":{start:{line:258,column:16},end:{line:258,column:45}},"113":{start:{line:261,column:16},end:{line:261,column:44}},"114":{start:{line:263,column:12},end:{line:263,column:35}},"115":{start:{line:266,column:19},end:{line:266,column:51}},"116":{start:{line:267,column:4},end:{line:267,column:20}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:43,column:38},end:{line:43,column:39}},loc:{start:{line:43,column:95},end:{line:85,column:1}},line:43},"1":{name:"(anonymous_1)",decl:{start:{line:64,column:8},end:{line:64,column:9}},loc:{start:{line:64,column:37},end:{line:67,column:9}},line:64},"2":{name:"(anonymous_2)",decl:{start:{line:76,column:8},end:{line:76,column:9}},loc:{start:{line:76,column:31},end:{line:79,column:9}},line:76},"3":{name:"(anonymous_3)",decl:{start:{line:103,column:51},end:{line:103,column:52}},loc:{start:{line:103,column:88},end:{line:108,column:1}},line:103},"4":{name:"(anonymous_4)",decl:{start:{line:104,column:60},end:{line:104,column:61}},loc:{start:{line:104,column:80},end:{line:104,column:118}},line:104},"5":{name:"(anonymous_5)",decl:{start:{line:105,column:74},end:{line:105,column:75}},loc:{start:{line:105,column:100},end:{line:105,column:145}},line:105},"6":{name:"(anonymous_6)",decl:{start:{line:106,column:62},end:{line:106,column:63}},loc:{start:{line:106,column:96},end:{line:106,column:143}},line:106},"7":{name:"(anonymous_7)",decl:{start:{line:122,column:51},end:{line:122,column:52}},loc:{start:{line:122,column:106},end:{line:155,column:1}},line:122},"8":{name:"(anonymous_8)",decl:{start:{line:135,column:33},end:{line:135,column:34}},loc:{start:{line:135,column:66},end:{line:146,column:5}},line:135},"9":{name:"(anonymous_9)",decl:{start:{line:138,column:45},end:{line:138,column:46}},loc:{start:{line:138,column:69},end:{line:145,column:9}},line:138},"10":{name:"(anonymous_10)",decl:{start:{line:149,column:8},end:{line:149,column:9}},loc:{start:{line:149,column:27},end:{line:151,column:9}},line:149},"11":{name:"(anonymous_11)",decl:{start:{line:168,column:46},end:{line:168,column:47}},loc:{start:{line:168,column:130},end:{line:226,column:1}},line:168},"12":{name:"(anonymous_12)",decl:{start:{line:174,column:34},end:{line:174,column:35}},loc:{start:{line:174,column:58},end:{line:223,column:5}},line:174},"13":{name:"(anonymous_13)",decl:{start:{line:175,column:22},end:{line:175,column:23}},loc:{start:{line:175,column:34},end:{line:222,column:9}},line:175},"14":{name:"(anonymous_14)",decl:{start:{line:190,column:61},end:{line:190,column:62}},loc:{start:{line:190,column:78},end:{line:197,column:17}},line:190},"15":{name:"(anonymous_15)",decl:{start:{line:204,column:84},end:{line:204,column:85}},loc:{start:{line:204,column:101},end:{line:211,column:21}},line:204},"16":{name:"(anonymous_16)",decl:{start:{line:239,column:40},end:{line:239,column:41}},loc:{start:{line:239,column:94},end:{line:268,column:1}},line:239},"17":{name:"(anonymous_17)",decl:{start:{line:243,column:28},end:{line:243,column:29}},loc:{start:{line:243,column:52},end:{line:265,column:5}},line:243},"18":{name:"(anonymous_18)",decl:{start:{line:244,column:22},end:{line:244,column:23}},loc:{start:{line:244,column:34},end:{line:264,column:9}},line:244},"19":{name:"(anonymous_19)",decl:{start:{line:255,column:41},end:{line:255,column:42}},loc:{start:{line:255,column:53},end:{line:257,column:17}},line:255}},branchMap:{"0":{loc:{start:{line:56,column:107},end:{line:56,column:135}},type:"binary-expr",locations:[{start:{line:56,column:107},end:{line:56,column:129}},{start:{line:56,column:133},end:{line:56,column:135}}],line:56},"1":{loc:{start:{line:139,column:12},end:{line:144,column:13}},type:"if",locations:[{start:{line:139,column:12},end:{line:144,column:13}},{start:{line:139,column:12},end:{line:144,column:13}}],line:139},"2":{loc:{start:{line:183,column:16},end:{line:185,column:17}},type:"if",locations:[{start:{line:183,column:16},end:{line:185,column:17}},{start:{line:183,column:16},end:{line:185,column:17}}],line:183},"3":{loc:{start:{line:191,column:20},end:{line:196,column:21}},type:"if",locations:[{start:{line:191,column:20},end:{line:196,column:21}},{start:{line:191,column:20},end:{line:196,column:21}}],line:191},"4":{loc:{start:{line:199,column:16},end:{line:212,column:17}},type:"if",locations:[{start:{line:199,column:16},end:{line:212,column:17}},{start:{line:199,column:16},end:{line:212,column:17}}],line:199},"5":{loc:{start:{line:205,column:24},end:{line:210,column:25}},type:"if",locations:[{start:{line:205,column:24},end:{line:210,column:25}},{start:{line:205,column:24},end:{line:210,column:25}}],line:205},"6":{loc:{start:{line:251,column:16},end:{line:253,column:17}},type:"if",locations:[{start:{line:251,column:16},end:{line:253,column:17}},{start:{line:251,column:16},end:{line:253,column:17}}],line:251}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();var fluid=(cov_2fps54cpn3.s[0]++,require("infusion"));var gpii=(cov_2fps54cpn3.s[1]++,fluid.registerNamespace("gpii"));var fs=(cov_2fps54cpn3.s[2]++,require("fs"));var path=(cov_2fps54cpn3.s[3]++,require("path"));var mkdirp=(cov_2fps54cpn3.s[4]++,require("mkdirp"));var glob=(cov_2fps54cpn3.s[5]++,require("glob"));var istanbul=(cov_2fps54cpn3.s[6]++,require("istanbul-lib-instrument"));cov_2fps54cpn3.s[7]++;require("./lib/resolveSafely");cov_2fps54cpn3.s[8]++;fluid.registerNamespace("gpii.testem.instrumenter");cov_2fps54cpn3.s[9]++;gpii.testem.instrumenter.defaultOptions={sources:["./**/*.js"],excludes:["./node_modules/**/*","./.git/**/*","./reports/**/*","./coverage/**/*","./.idea/**/*","./.vagrant/**/*","tests/**/*","./instrumented/**/*"],nonSources:["./**/*.!(js)","./Gruntfile.js"],istanbulOptions:{produceSourceMap:true,autoWrap:true}};cov_2fps54cpn3.s[10]++;gpii.testem.instrumenter.instrument=function(inputPath,outputPath,instrumentationOptions){cov_2fps54cpn3.f[0]++;var promises=(cov_2fps54cpn3.s[11]++,[]);var resolvedInputPath=(cov_2fps54cpn3.s[12]++,gpii.testem.resolveFluidModulePathSafely(inputPath));var resolvedOutputPath=(cov_2fps54cpn3.s[13]++,gpii.testem.resolveFluidModulePathSafely(outputPath));var mergePolicy=(cov_2fps54cpn3.s[14]++,{sources:"replace",excludes:"replace",nonSources:"replace"});var combinedInstrumentationOptions=(cov_2fps54cpn3.s[15]++,fluid.merge(mergePolicy,gpii.testem.instrumenter.defaultOptions,(cov_2fps54cpn3.b[0][0]++,instrumentationOptions)||(cov_2fps54cpn3.b[0][1]++,{})));var sourceFileWrappedPromise=(cov_2fps54cpn3.s[16]++,fluid.promise());cov_2fps54cpn3.s[17]++;promises.push(sourceFileWrappedPromise);var sourcesToExclude=(cov_2fps54cpn3.s[18]++,combinedInstrumentationOptions.excludes.concat(combinedInstrumentationOptions.nonSources));var sourceFilePromise=(cov_2fps54cpn3.s[19]++,gpii.testem.instrumenter.findFilesMatchingFilter(resolvedInputPath,combinedInstrumentationOptions.sources,sourcesToExclude));cov_2fps54cpn3.s[20]++;sourceFilePromise.then(function(filesToInstrument){cov_2fps54cpn3.f[1]++;var instrumentationPromise=(cov_2fps54cpn3.s[21]++,gpii.testem.instrumenter.instrumentAllFiles(filesToInstrument,inputPath,resolvedOutputPath,combinedInstrumentationOptions));cov_2fps54cpn3.s[22]++;instrumentationPromise.then(sourceFileWrappedPromise.resolve,sourceFileWrappedPromise.reject);},sourceFileWrappedPromise.reject);var nonSourceWrappedPromise=(cov_2fps54cpn3.s[23]++,fluid.promise());cov_2fps54cpn3.s[24]++;promises.push(nonSourceWrappedPromise);var nonSourcePromise=(cov_2fps54cpn3.s[25]++,gpii.testem.instrumenter.findFilesMatchingFilter(resolvedInputPath,combinedInstrumentationOptions.nonSources,combinedInstrumentationOptions.excludes));cov_2fps54cpn3.s[26]++;nonSourcePromise.then(function(filesToCopy){cov_2fps54cpn3.f[2]++;var fileCopyPromise=(cov_2fps54cpn3.s[27]++,gpii.testem.instrumenter.copyAllFiles(filesToCopy,inputPath,resolvedOutputPath));cov_2fps54cpn3.s[28]++;fileCopyPromise.then(nonSourceWrappedPromise.resolve,nonSourceWrappedPromise.reject);},nonSourceWrappedPromise.reject);var sequence=(cov_2fps54cpn3.s[29]++,fluid.promise.sequence(promises));cov_2fps54cpn3.s[30]++;return sequence;};cov_2fps54cpn3.s[31]++;gpii.testem.instrumenter.combinePositivePatterns=function(patterns,inversePatterns){cov_2fps54cpn3.f[3]++;var positivePatterns=(cov_2fps54cpn3.s[32]++,fluid.makeArray(patterns).filter(function(pattern){cov_2fps54cpn3.f[4]++;cov_2fps54cpn3.s[33]++;return pattern.indexOf("!")!==0;}));var negativeInversePatterns=(cov_2fps54cpn3.s[34]++,fluid.makeArray(inversePatterns).filter(function(inversePattern){cov_2fps54cpn3.f[5]++;cov_2fps54cpn3.s[35]++;return inversePattern.indexOf("!")===0;}));var positiveInversePatterns=(cov_2fps54cpn3.s[36]++,negativeInversePatterns.map(function(inverseWithExclamation){cov_2fps54cpn3.f[6]++;cov_2fps54cpn3.s[37]++;return inverseWithExclamation.substring(1);}));cov_2fps54cpn3.s[38]++;return positivePatterns.concat(positiveInversePatterns);};cov_2fps54cpn3.s[39]++;gpii.testem.instrumenter.findFilesMatchingFilter=function(baseInputPath,positiveRules,negativeRules){cov_2fps54cpn3.f[7]++;var promise=(cov_2fps54cpn3.s[40]++,fluid.promise());var positivePatterns=(cov_2fps54cpn3.s[41]++,gpii.testem.instrumenter.combinePositivePatterns(positiveRules,negativeRules));var negativePatterns=(cov_2fps54cpn3.s[42]++,gpii.testem.instrumenter.combinePositivePatterns(negativeRules,positiveRules));var options=(cov_2fps54cpn3.s[43]++,{cwd:baseInputPath,ignore:negativePatterns,nodir:true});var promises=(cov_2fps54cpn3.s[44]++,[]);cov_2fps54cpn3.s[45]++;fluid.each(positivePatterns,function(singlePositivePattern){cov_2fps54cpn3.f[8]++;var singlePatternPromise=(cov_2fps54cpn3.s[46]++,fluid.promise());cov_2fps54cpn3.s[47]++;promises.push(singlePatternPromise);cov_2fps54cpn3.s[48]++;glob(singlePositivePattern,options,function(error,files){cov_2fps54cpn3.f[9]++;cov_2fps54cpn3.s[49]++;if(error){cov_2fps54cpn3.b[1][0]++;cov_2fps54cpn3.s[50]++;singlePatternPromise.reject(error);}else{cov_2fps54cpn3.b[1][1]++;cov_2fps54cpn3.s[51]++;singlePatternPromise.resolve(files);}});});var sequence=(cov_2fps54cpn3.s[52]++,fluid.promise.sequence(promises));cov_2fps54cpn3.s[53]++;sequence.then(function(results){cov_2fps54cpn3.f[10]++;cov_2fps54cpn3.s[54]++;promise.resolve(fluid.flatten(results));},promise.reject);cov_2fps54cpn3.s[55]++;return promise;};cov_2fps54cpn3.s[56]++;gpii.testem.instrumenter.instrumentAllFiles=function(filesToInstrument,baseInputPath,baseOutputPath,instrumentationOptions){cov_2fps54cpn3.f[11]++;var resolvedBaseInputPath=(cov_2fps54cpn3.s[57]++,fluid.module.resolvePath(baseInputPath));var resolvedBaseOutputPath=(cov_2fps54cpn3.s[58]++,fluid.module.resolvePath(baseOutputPath));var instrumenter=(cov_2fps54cpn3.s[59]++,istanbul.createInstrumenter(instrumentationOptions.istanbulOptions));var promises=(cov_2fps54cpn3.s[60]++,[]);cov_2fps54cpn3.s[61]++;fluid.each(filesToInstrument,function(relativePath){cov_2fps54cpn3.f[12]++;cov_2fps54cpn3.s[62]++;promises.push(function(){cov_2fps54cpn3.f[13]++;var instrumentationOuterPromise=(cov_2fps54cpn3.s[63]++,fluid.promise());var singleFilePromises=(cov_2fps54cpn3.s[64]++,[]);var inputPath=(cov_2fps54cpn3.s[65]++,path.resolve(resolvedBaseInputPath,relativePath));var outputPath=(cov_2fps54cpn3.s[66]++,path.resolve(resolvedBaseOutputPath,relativePath));var outputDir=(cov_2fps54cpn3.s[67]++,path.dirname(outputPath));cov_2fps54cpn3.s[68]++;try{cov_2fps54cpn3.s[69]++;if(!fs.existsSync(outputDir)){cov_2fps54cpn3.b[2][0]++;cov_2fps54cpn3.s[70]++;mkdirp.sync(outputDir);}else{cov_2fps54cpn3.b[2][1]++;}var source=(cov_2fps54cpn3.s[71]++,fs.readFileSync(inputPath,"utf8"));var instrumentedSource=(cov_2fps54cpn3.s[72]++,instrumenter.instrumentSync(source,inputPath));var instrumentedFileWritePromise=(cov_2fps54cpn3.s[73]++,fluid.promise());cov_2fps54cpn3.s[74]++;singleFilePromises.push(instrumentedFileWritePromise);cov_2fps54cpn3.s[75]++;fs.writeFile(outputPath,instrumentedSource,function(error){cov_2fps54cpn3.f[14]++;cov_2fps54cpn3.s[76]++;if(error){cov_2fps54cpn3.b[3][0]++;cov_2fps54cpn3.s[77]++;instrumentedFileWritePromise.reject(error);}else{cov_2fps54cpn3.b[3][1]++;cov_2fps54cpn3.s[78]++;instrumentedFileWritePromise.resolve();}});cov_2fps54cpn3.s[79]++;if(instrumentationOptions.istanbulOptions.produceSourceMap){cov_2fps54cpn3.b[4][0]++;var sourceMap=(cov_2fps54cpn3.s[80]++,instrumenter.lastSourceMap());var sourceMapPath=(cov_2fps54cpn3.s[81]++,outputPath+".map");var sourceMapWritePromise=(cov_2fps54cpn3.s[82]++,fluid.promise());cov_2fps54cpn3.s[83]++;singleFilePromises.push(sourceMapWritePromise);cov_2fps54cpn3.s[84]++;fs.writeFile(sourceMapPath,JSON.stringify(sourceMap,null,2),function(error){cov_2fps54cpn3.f[15]++;cov_2fps54cpn3.s[85]++;if(error){cov_2fps54cpn3.b[5][0]++;cov_2fps54cpn3.s[86]++;sourceMapWritePromise.reject(error);}else{cov_2fps54cpn3.b[5][1]++;cov_2fps54cpn3.s[87]++;sourceMapWritePromise.resolve();}});}else{cov_2fps54cpn3.b[4][1]++;}var singleFileSequence=(cov_2fps54cpn3.s[88]++,fluid.promise.sequence(singleFilePromises));cov_2fps54cpn3.s[89]++;singleFileSequence.then(instrumentationOuterPromise.resolve,instrumentationOuterPromise.reject);}catch(error){cov_2fps54cpn3.s[90]++;fluid.log("Error instrumenting file '",inputPath,"':",error);cov_2fps54cpn3.s[91]++;instrumentationOuterPromise.reject(error);}cov_2fps54cpn3.s[92]++;return instrumentationOuterPromise;});});var sequence=(cov_2fps54cpn3.s[93]++,fluid.promise.sequence(promises));cov_2fps54cpn3.s[94]++;return sequence;};cov_2fps54cpn3.s[95]++;gpii.testem.instrumenter.copyAllFiles=function(filesToCopy,baseInputPath,baseOutputPath){cov_2fps54cpn3.f[16]++;var resolvedBaseInputPath=(cov_2fps54cpn3.s[96]++,fluid.module.resolvePath(baseInputPath));var resolvedBaseOutputPath=(cov_2fps54cpn3.s[97]++,fluid.module.resolvePath(baseOutputPath));var promises=(cov_2fps54cpn3.s[98]++,[]);cov_2fps54cpn3.s[99]++;fluid.each(filesToCopy,function(relativePath){cov_2fps54cpn3.f[17]++;cov_2fps54cpn3.s[100]++;promises.push(function(){cov_2fps54cpn3.f[18]++;var fileCopyPromise=(cov_2fps54cpn3.s[101]++,fluid.promise());cov_2fps54cpn3.s[102]++;try{var fullInputPath=(cov_2fps54cpn3.s[103]++,path.resolve(resolvedBaseInputPath,relativePath));var readStream=(cov_2fps54cpn3.s[104]++,fs.createReadStream(fullInputPath));var outputPath=(cov_2fps54cpn3.s[105]++,path.resolve(resolvedBaseOutputPath,relativePath));var outputDir=(cov_2fps54cpn3.s[106]++,path.dirname(outputPath));cov_2fps54cpn3.s[107]++;if(!fs.existsSync(outputDir)){cov_2fps54cpn3.b[6][0]++;cov_2fps54cpn3.s[108]++;mkdirp.sync(outputDir);}else{cov_2fps54cpn3.b[6][1]++;};var writeStream=(cov_2fps54cpn3.s[109]++,fs.createWriteStream(outputPath));cov_2fps54cpn3.s[110]++;writeStream.on("finish",function(){cov_2fps54cpn3.f[19]++;cov_2fps54cpn3.s[111]++;fileCopyPromise.resolve();});cov_2fps54cpn3.s[112]++;readStream.pipe(writeStream);}catch(err){cov_2fps54cpn3.s[113]++;fileCopyPromise.reject(err);}cov_2fps54cpn3.s[114]++;return fileCopyPromise;});});var sequence=(cov_2fps54cpn3.s[115]++,fluid.promise.sequence(promises));cov_2fps54cpn3.s[116]++;return sequence;};